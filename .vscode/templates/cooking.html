<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cooking Bot</title>
<style>
body { font-family: Arial; background: #f8f9fa; display:flex; justify-content:center; align-items:flex-start; min-height:100vh; margin:0; padding:0;}
.container { width: 600px; margin-top:50px; background:#fff; padding:25px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
h1 { text-align:center; margin-bottom:20px; color:#333;}
input[type="text"] { width:100%; padding:12px; margin-bottom:15px; border-radius:8px; border:1px solid #ccc;}
button { width:100%; padding:12px; background:#28a745; color:white; border:none; border-radius:8px; cursor:pointer; font-size:16px;}
button:hover { background:#218838; }
.recipes { margin-top:20px; padding:15px; background:#f1f1f1; border-radius:8px; min-height:100px; white-space:pre-wrap;}
.loading { color:#555; font-style:italic;}
</style>
</head>
<body>
<div class="container">
<h1>üç≥ Cooking Bot</h1>
<input type="text" id="ingredients" placeholder="Enter ingredients, comma-separated">
<button onclick="generateRecipes()">Generate Recipes</button>
<div class="recipes" id="recipes">Recipes will appear here...</div>
</div>

<script>
async function generateRecipes() {
    const input = document.getElementById("ingredients").value.trim();
    const recipesDiv = document.getElementById("recipes");

    if (!input) { alert("Please enter at least one ingredient."); return; }

    const ingredients = input.split(",").map(s => s.trim()).filter(Boolean);
    recipesDiv.innerHTML = "<p class='loading'>üç≤ Generating recipes...</p>";

    try {
        const res = await fetch("/generate_recipes", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ ingredients })
        });

        const data = await res.json();

        if (data.error) {
            recipesDiv.innerHTML = `<p style="color:red;">Error: ${data.error}</p>`;
            return;
        }

        recipesDiv.textContent = data.recipes_text || "No recipes found.";
    } catch (err) {
        recipesDiv.innerHTML = `<p style="color:red;">Request failed: ${err.message}</p>`;
        console.error(err);
    }
}
</script>
</body>
</html>
